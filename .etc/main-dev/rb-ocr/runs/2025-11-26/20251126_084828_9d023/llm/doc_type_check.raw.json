{"Model":"gpt-4o","Content":"You are a deterministic OCR document-type classifier.\nAnalyze the OCR text and output ONLY the following JSON object (no extra text):\n{\n  \"single_doc_type\": true | false,\n  \"confidence: number [0...100]\",\n  \"detected_doc_types\": [ \"...\" ],\n  \"reasoning\": \"...\"\n  \"doc_type_known\": true | false\n}\nNo extra text or commentary outside the JSON.\n\nSemantics:\n- detected_doc_types: canonicalized titles (best-first). If none, output an empty array.\n- single_doc_type: if detected_doc_types contains =\u003c 1 type → true, otherwise → false.\n- doc_type_known: true ONLY if the top candidate is in the following Dictionary; false for unknown/ambiguous types.\n- confidence: coarse confidence for the top candidate (diagnostics only; do not derive doc_type_known from it).\n- reasoning: brief explanation for the decision.\n\n---\n\n## CLASSIFICATION ALGORITHM (strict order)\n\n### 1. Noise Filtering\n\nIgnore any of the following — they NEVER create new document types:\n* OCR artifacts, partial English words, mixed-language fragments\n* Dates, form numbers, signatures, translations, page numbers, headers/footers\n* Repetitions of the same title in another language (e.g. Kazakh ↔ Russian)\n\n### 2. Candidate Title Detection\n\nSearch the **first 15 non-empty lines** for possible document titles.\nA line is a title if it contains or resembles words like:\n**ПРИКАЗ, СПРАВКА, ЛИСТ, ВЫПИСКА, ЗАКЛЮЧЕНИЕ, УВЕДОМЛЕНИЕ**\nor their Kazakh equivalents (**БҰЙРЫҚ, АНЫҚТАМА, ХАТТАМА, ХАБАРЛАМА**).\n\n### 3. Canonical Document Types (reference list)\n\nFuzzy-match (Levenshtein ≥ 0.8) each candidate title to one of these canonical types from Dictionary:\n1. Лист временной нетрудоспособности (больничный лист)\n2. Приказ о выходе в декретный отпуск по уходу за ребенком\n3. Справка о выходе в декретный отпуск по уходу за ребенком\n4. Выписка из стационара (выписной эпикриз)\n5. Больничный лист на сопровождающего (если предусмотрено)\n6. Заключение врачебно-консультативной комиссии (ВКК)\n7. Справка об инвалидности\n8. Справка о степени утраты общей трудоспособности\n9. Приказ о расторжении трудового договора\n10. Справка о расторжении трудового договора\n11. Справка о регистрации в качестве безработного\n12. Приказ работодателя о предоставлении отпуска без сохранения заработной платы\n13. Справка о неполучении доходов\n14. Уведомление о регистрации в качестве лица, ищущего работу\n15. Лица, зарегистрированные в качестве безработных\n\nNOTE:\n**Important semantic aliases (normalize these as identical):**\n* \"о предоставлении отпуска по уходу за ребенком\"\n* \"о выходе в декретный отпуск по уходу за ребенком\"\n* \"о предоставлении декретного отпуска\"\n* \"Бала күтіміне байланысты жалақысы сақталмайтын демалыстар беру туралы\"\n\nAll refer to canonical type either:\n**Приказ о выходе в декретный отпуск по уходу за ребенком**\nOR\n**Справка о выходе в декретный отпуск по уходу за ребенком**\n\n### 4. Normalization\n\nMerge duplicates, translations, or paraphrases describing the same purpose.\nIf all detected titles are linguistic variants or synonyms of one canonical type → treat as **one** document → `single_doc_type = true`.\n\n### 5. Distinct Document Detection\nIf two or more **different canonical types** are present (e.g. \"Приказ о расторжении трудового договора\" and \"Справка о расторжении трудового договора\") → `single_doc_type = false`.\nBefore declaring \"multiple types,\" confirm that they represent **different legal purposes**, not wording variants or translations.\n\n### 6. Issuer Check\n\nIf the text shows clearly unrelated issuers (different organizations or ministries), and each is tied to a distinct canonical type → `single_doc_type = false`.\nOtherwise, ignore repeated issuer mentions.\n\n### 7. Default Safety\n\n- If uncertain, noisy, or ambiguous → default to\n{\n\"single_doc_type\": true,\n\"detected_doc_types\": [...]\n}\n- If confidence is \u003c 90 →\n{\n\"single_doc_type\": true,\n\"detected_doc_types\": [...]\n}\n\n---\n\n### 8. Output Rules\n\n* Return **exactly one** valid JSON object.\n* Do **NOT** include markdown formatting, code fences, explanations.\n* Do **NOT** include ```json formatting\n* JSON keys and string values must be enclosed in double quotes.\n\n---\n\n### TEXT FOR ANALYSIS\n{\"pages\": [{\"page_number\": 1, \"text\": \"„ла талаған Oi COMB лы 2, ete ам... 0\\nҚазақстан Республикасы Денсаулық сақтау министриии міндегін\\nатқарушының 2020 жылғы \\\"30\\\" қазандағы\\n№ ҚР ДСМ-175/2020 бұйрығымен бекітілген № 026/е нысанды\\nSr ,\\nғыда, “Мед документация форма Ne 026/y утверждена приказом\\n. ісполияюшего обязанности Министра здравоохранения Республики\\n‚ Жазахстан от \\\"ЗО? октября 2020 года № КР ДСМ-175/2020\\nҰйымның атауы\\nНаименование организации\\nКГП на ПХВ \\\"Городская поликлиника №26\\\" УОЗ г. Алматы\\n\\\"Дәрігерлік - консультациялық комиссияның қорытындысы\\\" №026/е нысан\\nФорма № 026/у \\\"Заключение врачебно — консультационной комиссии\\\"\\n№ 1481\\nот« 5 » Ноябрь 2025 года\\nЖеке тұлғаға берілді (Выдана физическому лицу)\\nАЛЫБАЕВА ГУЛЬНАРА ЕРБОЛАТОВНА\\n(фочилияя) азы (sea) кесінің аты (отчестео)\\nТуған күні (Дата рождения) 10 августа 1981 Жынысы (пол) Женский\\nЖСОНИИН 810810400306 _\\nҮйішің мексижайы, телефоны (Домашний адрес. телефон) Алматы , РАЙ BH ОРОД\\nбайск ‚ ИМАНОВА /ТАУСАМАЛЫ/ , ДОМ: 78 , +77076460553\\nосновные профессиональные обязан:\\nДа ігерлік - консультациялық комиссияның корытындысы (Заключение врачебно — конс ‚льтационной комиссии\\nР )\\n^\\nп TOSI Қ! ` овлением ЯНИЯ BLA оменно нс в состоянии\\nвыполнять свои основные профессиональные обязанности --.\\nПериод с по года =\\nКомиссия торагасы (Председатель комиссии) НУРИМБЕТОВА КАРЛЫГАШ ИСЛАМО бон mm\\ney\\nTAQ. (ФИО ) козы шомикь)\\nХатшы (Секретарь) АЛЫБЛЕВА ИНДИРА ЕРБОЛАТОН\\nTAO. (® HO.) колы (подиикь)\\na ak i re eee айыл дн = —=\u003e—.-——\"}]}\n","Temperature":0,"MaxTokens":500,"response_format":null}
{"choices":[{"finish_reason":"stop","index":0,"logprobs":null,"message":{"annotations":[],"content":"{\n  \"single_doc_type\": true,\n  \"confidence\": 95,\n  \"detected_doc_types\": [\"Заключение врачебно-консультативной комиссии (ВКК)\"],\n  \"reasoning\": \"The document contains the title 'Заключение врачебно-консультативной комиссии', which matches a known canonical type.\",\n  \"doc_type_known\": true\n}","refusal":null,"role":"assistant"}}],"created":1764128922,"id":"chatcmpl-Cg0oE8Qj0JssaMp2KPbC2q4eOXQoT","model":"gpt-4o-2024-08-06","object":"chat.completion","service_tier":"default","system_fingerprint":"fp_e819e3438b","usage":{"completion_tokens":83,"completion_tokens_details":{"accepted_prediction_tokens":0,"audio_tokens":0,"reasoning_tokens":0,"rejected_prediction_tokens":0},"prompt_tokens":1669,"prompt_tokens_details":{"audio_tokens":0,"cached_tokens":0},"total_tokens":1752}}