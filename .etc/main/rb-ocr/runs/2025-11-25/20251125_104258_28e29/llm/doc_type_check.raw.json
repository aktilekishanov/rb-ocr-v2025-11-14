{"Model":"gpt-4o","Content":"You are a deterministic OCR document-type classifier.\nAnalyze the OCR text and output ONLY the following JSON object (no extra text):\n{\n  \"single_doc_type\": true | false,\n  \"confidence: number [0...100]\",\n  \"detected_doc_types\": [ \"...\" ],\n  \"reasoning\": \"...\"\n  \"doc_type_known\": true | false\n}\nNo extra text or commentary outside the JSON.\n\nSemantics:\n- detected_doc_types: canonicalized titles (best-first). If none, output an empty array.\n- single_doc_type: if detected_doc_types contains =\u003c 1 type → true, otherwise → false.\n- doc_type_known: true ONLY if the top candidate is in the following Dictionary; false for unknown/ambiguous types.\n- confidence: coarse confidence for the top candidate (diagnostics only; do not derive doc_type_known from it).\n- reasoning: brief explanation for the decision.\n\n---\n\n## CLASSIFICATION ALGORITHM (strict order)\n\n### 1. Noise Filtering\n\nIgnore any of the following — they NEVER create new document types:\n* OCR artifacts, partial English words, mixed-language fragments\n* Dates, form numbers, signatures, translations, page numbers, headers/footers\n* Repetitions of the same title in another language (e.g. Kazakh ↔ Russian)\n\n### 2. Candidate Title Detection\n\nSearch the **first 15 non-empty lines** for possible document titles.\nA line is a title if it contains or resembles words like:\n**ПРИКАЗ, СПРАВКА, ЛИСТ, ВЫПИСКА, ЗАКЛЮЧЕНИЕ, УВЕДОМЛЕНИЕ**\nor their Kazakh equivalents (**БҰЙРЫҚ, АНЫҚТАМА, ХАТТАМА, ХАБАРЛАМА**).\n\n### 3. Canonical Document Types (reference list)\n\nFuzzy-match (Levenshtein ≥ 0.8) each candidate title to one of these canonical types from Dictionary:\n1. Лист временной нетрудоспособности (больничный лист)\n2. Приказ о выходе в декретный отпуск по уходу за ребенком\n3. Справка о выходе в декретный отпуск по уходу за ребенком\n4. Выписка из стационара (выписной эпикриз)\n5. Больничный лист на сопровождающего (если предусмотрено)\n6. Заключение врачебно-консультативной комиссии (ВКК)\n7. Справка об инвалидности\n8. Справка о степени утраты общей трудоспособности\n9. Приказ о расторжении трудового договора\n10. Справка о расторжении трудового договора\n11. Справка о регистрации в качестве безработного\n12. Приказ работодателя о предоставлении отпуска без сохранения заработной платы\n13. Справка о неполучении доходов\n14. Уведомление о регистрации в качестве лица, ищущего работу\n15. Лица, зарегистрированные в качестве безработных\n\nNOTE:\n**Important semantic aliases (normalize these as identical):**\n* \"о предоставлении отпуска по уходу за ребенком\"\n* \"о выходе в декретный отпуск по уходу за ребенком\"\n* \"о предоставлении декретного отпуска\"\n* \"Бала күтіміне байланысты жалақысы сақталмайтын демалыстар беру туралы\"\n\nAll refer to canonical type either:\n**Приказ о выходе в декретный отпуск по уходу за ребенком**\nOR\n**Справка о выходе в декретный отпуск по уходу за ребенком**\n\n### 4. Normalization\n\nMerge duplicates, translations, or paraphrases describing the same purpose.\nIf all detected titles are linguistic variants or synonyms of one canonical type → treat as **one** document → `single_doc_type = true`.\n\n### 5. Distinct Document Detection\nIf two or more **different canonical types** are present (e.g. \"Приказ о расторжении трудового договора\" and \"Справка о расторжении трудового договора\") → `single_doc_type = false`.\nBefore declaring \"multiple types,\" confirm that they represent **different legal purposes**, not wording variants or translations.\n\n### 6. Issuer Check\n\nIf the text shows clearly unrelated issuers (different organizations or ministries), and each is tied to a distinct canonical type → `single_doc_type = false`.\nOtherwise, ignore repeated issuer mentions.\n\n### 7. Default Safety\n\n- If uncertain, noisy, or ambiguous → default to\n{\n\"single_doc_type\": true,\n\"detected_doc_types\": [...]\n}\n- If confidence is \u003c 90 →\n{\n\"single_doc_type\": true,\n\"detected_doc_types\": [...]\n}\n\n---\n\n### 8. Output Rules\n\n* Return **exactly one** valid JSON object.\n* Do **NOT** include markdown formatting, code fences, explanations.\n* Do **NOT** include ```json formatting\n* JSON keys and string values must be enclosed in double quotes.\n\n---\n\n### TEXT FOR ANALYSIS\n{\"pages\": [{\"page_number\": 1, \"text\": \"Дәрігер толтырыды\\nда емдеу мексмесін-\\nде қалдырады /\\nЗаполімстея прачом и\\nостается в лечеб-ном\\nучреждении\\nЕМДЕУ МЕКЕМЕСІНІҢ ДӘРІГЕРІ ТОЛТЫРАДЫ - ЗАПОЛНЯЕТСЯ ВРАЧОМ ЛЕЧЕБНОГО УЧРЕЖДЕНИЯ\\nЕҢБЕККЕ УАҚЫТША ЖАРАМСЫЗДЫҚ ПАРАҒЫ / ЛИСТ О ВРЕМЕННОЙ HETE УДОСПОСОБНОСТИ\\nАЛҒАШҚЫ - ЖАЛҒАСЫ /П\\n(тиістісінің астын сы: зу\\nЕРВИЧНЫЙ - ПРОДОЛЖЕНИЕ\\n/ соответствующее подчеркнуть)\\nБАЙБОСЫНОВ PAYAH АДАСКАНОВИЧ\\n(сңбскке жарамсыз адамнын тегі, аты және akecinut аты / фамилия, имя и отчество ист рудосиособного)\\nРИДДЕР МИКРОРАЙОН: Четвертый , ДОМ: 34, КВАРТИРА: 6\\n(мехей жайы “домашний адрес)\\nТОО \\\"Казцинк\\\" ВК ГОК ПП г.Риддер ЦМС\\n(қызмст орны - кәсіпорынның пемесе мекеменің атау!\\nБерілді ж.\\nВылан (күни, айы, жылы / число, мссяц, гол) Ir\\nы место работы - панмсцовалис предприятия или учреждения}\\n(алушының\\nСерия ББ №\\nАЛЕКСАНДРОВ М, В.\\n(дариерли Teri / фамилия врачи)\\nСыркатнаманың №\\n№ истории болезни\\nқолы / пасписка получателя)\\nЕҢБЕККЕ УАҚЫТША ЖАРАМСЫЗДЫҚ ПАРАҒ Ы / ЛИСТ ОВРЕМЕННОЙ НЕТРУДОСПОСОБНОСТИ\\nАЛҒАШКЫ - ПАРАКТЫН ЖАЛҒАСЫ / ПЕРВИЧНЫЙ - ПРОЛОЛЖЕНИЕ ЛИ\\n(тиістісінің астын сызу/соотастстауюшсе подчеркнуть}\\nерия BB Ne\\nС\\nКГП на пХВ Punnepexan городская больница\\\" УЗ ВКО акимата (Республика Казахстан, Восточно-Казахстанская область, г. Риддер, ул.\\nТохтарова 4A)\\n(смдсу мекемесінің атауы және мекен жайы / пзименование и адрес лечебного учреждения)\\nБерілді ж. Хаж-10 коды\\nВылан (күни, айы / число, месяц) г.\\nБАЙБОСЫНОВ РАУАН АДАСКАНОВИЧ Жасы 39\\n(сибскке уакытша жарамсыз адампың тегі, аты, әкесінін ағы / фамилия, имя, отчество врсмснио нетрудосиособиога) Возраст (толық жасы / полных л\\nТОО \\\"Казцинк\\\" ВК ГОК ПП г.Риддер ЦМС ‚ в\\nодитель погрузчика\\n(кызмет орпы - кәсіпарынпың ие мекемеши атауы, лауазымы место работы - наименование предприятия или учреждения, должность)\\nХаж-10 колы / Код МКБ-10 Қорытынды Хаж-10 коды / Заключительный Код МК\\nМ05.8\\n(казак не орыс тіліпде\\n{ на казахском или русском языке)\\nЕнбекке узкытшь жарамсыздықты түрі KOPCETLICin { жіті кемосе созылыелы аурулардың асқынуы, жарақаттанғын жонс улаған, жүкікикті жасшилы үзген, мунас балаға күтім жасау. — жуки болу\\n(балаларды) асмрал ary, сапаторийтік-курсорттық ұйымдарла талық емделу, карантин, «тталглиялық протелаеу)\\nУказать шид временной истру заспособинялы ( острое nan обострение кроническаить\\nискусствснное рсрмненмс берсысилюс ти, ухел м больным ребенком, беременность п рслы, усыиралонис, YADICPT UNS исаюрюжденииго рсбемей Істей), долючишание в сапатопночку рортмых срганизаинях,\\n№ 10100018:\\nПечать лечебного учреждения\\nЕр /Муж | Siva, / Жен.\\nт Я\\nписисииц астын сызу i\\nсоответствукицее подчеркнуть\\njane босану, жани туған биланы\\n3.2\\n)\\nОле чания, травмы и отравления,\\nкараитин, ортопедическос аротсаиронание )\\nКүтім жасау бойынша демалыс кезіпде ХАЖ-10 бойынша паукастың жасы, диагнозы көрсетілсін, карантин бойыншша демалыс кезілде ХАЖ-10 байынша карантинді туындатқан аурудың ата\\nПри отиусхе по уходу указать позраст больтого и диагноз по МКБ-10, при отпуске по кариитину указать название заболевания по МКБ-10, вызвавтиего карантин,\\nСанаторийлік-курорттық емделу кезінде жолдама мерзімінің басталатын және бітстіп уақыты көрсетілсін / при санаторио-курортиом лечении указать|дату начала и окончания срока путевки\\nРЕЖИМ Режимді бұзушылық туралы белг\\nАмбулаторный -\\ni/ Отметки о нарушении режима\\nкердің колы / Подпись врача ..............................\\nСтационарда болды / Находился в стационаре\\nж. ж\\nы г. по\\nУакытша басқа жұмысқа ауыстырылсын / Перевести временно на другую работу\\nж ж\\nс т. по\\nБас дәрігердіп колы / Поднись главного врача\\nЖУМЫСТАН БОСАТЫЛУ\\nКай куниси бастап / С какого числа\\n(күні, айы число, месяц} (күш мен айы жазумен / число и месяц прописью)\\nҚай күнді коса алганла қай күнге дейш / По какое число оключительно\\nМӘС-ға жіберілді / Направлен на\\nдейін ж\\n9% Дәрігердің қолы / Подпись врача\\nМСЭ\\nКуаландырылды / Освидегельствован|\\nдейін ж\\nТ. | Сараптама қарытындысы / Экспертное\\nМОС - тің мор:\\nПень МСЭ Подийсь нача\\n/ ОСВОБОЖДЕНИЕ ОТ РАБОТЫ\\nВрач общей практики АЛЕКСАНДРОВ М. В., участковый ae тәні\\n02.11.2025 одиннадцатое ноября 2025 общей практики ЛОХМАТОВ 0. А.\\n12.11.2025 двадцать перное ноября 2025 Врач обшей практики АЛЕКСАНДРОВ М. В. м\\nЖҰМЫСКА КІРІСУЛІРИСТУПИТЬК РАБОТЕ\\n(күні мең айы жазумен / число и месяц прописью)\\nЖаңа парақ берілді (жалғасы) Вмдап новый лист (продолжение) №\\nВрач обіцей практики АЛЕКСАНДРОВ М. В.\\n(дәрігердің хызметі, тегі, қолы / должность, фамилия и подпись прача)\\nзаключение\\nытиха отдела МСЭ.\\nДэриерай! қызметі мен тегі / Должность и фамилия прача oe Дәрігердің колы / Подпись врача\\nЕмдеу мекемесінің мөрі /\\nПечать лечебного учреждения\"}]}\n","Temperature":0,"MaxTokens":500,"response_format":null}
{"choices":[{"finish_reason":"stop","index":0,"logprobs":null,"message":{"annotations":[],"content":"{\n  \"single_doc_type\": true,\n  \"confidence\": 95,\n  \"detected_doc_types\": [\"Лист временной нетрудоспособности (больничный лист)\"],\n  \"reasoning\": \"The document contains multiple mentions of 'Лист временной нетрудоспособности', indicating a single document type related to temporary disability leave.\",\n  \"doc_type_known\": true\n}","refusal":null,"role":"assistant"}}],"created":1764049379,"id":"chatcmpl-Cfg7HtEhmgYIaGzNJ5s81vkIb9C75","model":"gpt-4o-2024-08-06","object":"chat.completion","service_tier":"default","system_fingerprint":"fp_e819e3438b","usage":{"completion_tokens":82,"completion_tokens_details":{"accepted_prediction_tokens":0,"audio_tokens":0,"reasoning_tokens":0,"rejected_prediction_tokens":0},"prompt_tokens":3008,"prompt_tokens_details":{"audio_tokens":0,"cached_tokens":0},"total_tokens":3090}}