{"Model":"gpt-4o","Content":"You are a deterministic OCR document-type classifier.\nAnalyze the OCR text and output ONLY the following JSON object (no extra text):\n{\n  \"single_doc_type\": true | false,\n  \"confidence: number [0...100]\",\n  \"detected_doc_types\": [ \"...\" ],\n  \"reasoning\": \"...\"\n  \"doc_type_known\": true | false\n}\nNo extra text or commentary outside the JSON.\n\nSemantics:\n- detected_doc_types: canonicalized titles (best-first). If none, output an empty array.\n- single_doc_type: if detected_doc_types contains =\u003c 1 type → true, otherwise → false.\n- doc_type_known: true ONLY if the top candidate is in the following Dictionary; false for unknown/ambiguous types.\n- confidence: coarse confidence for the top candidate (diagnostics only; do not derive doc_type_known from it).\n- reasoning: brief explanation for the decision.\n\n---\n\n## CLASSIFICATION ALGORITHM (strict order)\n\n### 1. Noise Filtering\n\nIgnore any of the following — they NEVER create new document types:\n* OCR artifacts, partial English words, mixed-language fragments\n* Dates, form numbers, signatures, translations, page numbers, headers/footers\n* Repetitions of the same title in another language (e.g. Kazakh ↔ Russian)\n\n### 2. Candidate Title Detection\n\nSearch the **first 15 non-empty lines** for possible document titles.\nA line is a title if it contains or resembles words like:\n**ПРИКАЗ, СПРАВКА, ЛИСТ, ВЫПИСКА, ЗАКЛЮЧЕНИЕ, УВЕДОМЛЕНИЕ**\nor their Kazakh equivalents (**БҰЙРЫҚ, АНЫҚТАМА, ХАТТАМА, ХАБАРЛАМА**).\n\n### 3. Canonical Document Types (reference list)\n\nFuzzy-match (Levenshtein ≥ 0.8) each candidate title to one of these canonical types from Dictionary:\n1. Лист временной нетрудоспособности (больничный лист)\n2. Приказ о выходе в декретный отпуск по уходу за ребенком\n3. Справка о выходе в декретный отпуск по уходу за ребенком\n4. Выписка из стационара (выписной эпикриз)\n5. Больничный лист на сопровождающего (если предусмотрено)\n6. Заключение врачебно-консультативной комиссии (ВКК)\n7. Справка об инвалидности\n8. Справка о степени утраты общей трудоспособности\n9. Приказ о расторжении трудового договора\n10. Справка о расторжении трудового договора\n11. Справка о регистрации в качестве безработного\n12. Приказ работодателя о предоставлении отпуска без сохранения заработной платы\n13. Справка о неполучении доходов\n14. Уведомление о регистрации в качестве лица, ищущего работу\n15. Лица, зарегистрированные в качестве безработных\n\nNOTE:\n**Important semantic aliases (normalize these as identical):**\n* \"о предоставлении отпуска по уходу за ребенком\"\n* \"о выходе в декретный отпуск по уходу за ребенком\"\n* \"о предоставлении декретного отпуска\"\n* \"Бала күтіміне байланысты жалақысы сақталмайтын демалыстар беру туралы\"\n\nAll refer to canonical type either:\n**Приказ о выходе в декретный отпуск по уходу за ребенком**\nOR\n**Справка о выходе в декретный отпуск по уходу за ребенком**\n\n### 4. Normalization\n\nMerge duplicates, translations, or paraphrases describing the same purpose.\nIf all detected titles are linguistic variants or synonyms of one canonical type → treat as **one** document → `single_doc_type = true`.\n\n### 5. Distinct Document Detection\nIf two or more **different canonical types** are present (e.g. \"Приказ о расторжении трудового договора\" and \"Справка о расторжении трудового договора\") → `single_doc_type = false`.\nBefore declaring \"multiple types,\" confirm that they represent **different legal purposes**, not wording variants or translations.\n\n### 6. Issuer Check\n\nIf the text shows clearly unrelated issuers (different organizations or ministries), and each is tied to a distinct canonical type → `single_doc_type = false`.\nOtherwise, ignore repeated issuer mentions.\n\n### 7. Default Safety\n\n- If uncertain, noisy, or ambiguous → default to\n{\n\"single_doc_type\": true,\n\"detected_doc_types\": [...]\n}\n- If confidence is \u003c 90 →\n{\n\"single_doc_type\": true,\n\"detected_doc_types\": [...]\n}\n\n---\n\n### 8. Output Rules\n\n* Return **exactly one** valid JSON object.\n* Do **NOT** include markdown formatting, code fences, explanations.\n* Do **NOT** include ```json formatting\n* JSON keys and string values must be enclosed in double quotes.\n\n---\n\n### TEXT FOR ANALYSIS\n{\"pages\": [{\"page_number\": 1, \"text\": \"тесгейдінін Алу күні мен\\nДәрігер толтырыды\\nда емдеу\\nмекемесінде\\nқалдырады/\\nЗаполияется врачом\\nи остается в лечеб-\\nном учреждении\\nЕМДЕУ\\nМЕКЕМЕСІНІҢ\\nДӘРІГЕРІ\\nТОЛТЫРАДЫ -\\nЗАПОЛНЯЕТСЯ\\nВРАЧОМ\\nЛЕЧЕБНОГО\\nУЧРЕЖДЕНИЯ\\n2737435385 06.10.2025\\nЕҢБЕККЕ УАҚЫТША ЖАРАМСЫЗДЫҚ ПАРАҒЫ / ЛИСТ ОВРЕМЕННОЙ НЕТРУДОСПОСОБНОСТИ\\nАЛҒАШҚЫ - ЖАЛҒАСЫ / ПЕРВИЧНЫЙ - ПРОДОЛЖЕНИЕ Серия BB Ne\\n(тиістісінің астын сызу / соответствующее подчеркнуть)\\nБЕСБАЕВА ГАЛИЯ ДЖЕНИСОВНА ИСАКОВ МАРАТ\\n(еңбекке жарамсыз адамнын тегі, аты және әкесінің аты / фамилия, имя и отчество нетрудоспособного) НУР Л АНБ АЕВИЧ\\n(ләрігердін тегі / фамилия арача)\\nЖАМБЫЛ ОБЛЫСЫ, ТАРАЗ, МАССИВ Акбулым, УЛИЦА Наурызым, 92, а тель\\n№ истории болезни\\n(мекен жайы / домашний адрес)\\nГКП ПХВ Жамбылский областной многопрофильный центр онкологии и хирургии\\n(кызмет орны - кәсіпорынның немесе мекеменің атауы / место работы - наименование предприятия или учреждения)\\nБерілді 06 октября 25 ж.\\nВыдан (күні, айы. жылы / число, месяц, год) г.\\n(алушының колы / расписка получателя)\\nЕҢБЕККЕ УАҚЫТША ЖАРАМСЫЗДЫҚ ПАРАҒЫ / ЛИСТ О ВРЕМЕННОЙ НЕТРУДОСПОСОБНОСТИ\\nАЛҒАШҚЫ - ПАРАҚТЫҢ ЖАЛҒАСЫ / ПЕРВИЧНЫЙ - ПРОДОЛЖЕНИЕ ЛИСТКА Ne\\n(тиістісінің астын сызу / соответствующее подчеркнуть)\\nСерия ББ №\\nГКП на ПХВ \\\"Городская поликлиника №7\\\" Жамбылской области\\n(емдеу мекемесінің атауы және мекен жайы / наименование и адрес лечебного учреждения)\\nБерілді 06 октября 25 ж. Хаж - 10 коды\\nВыдан (күні, айы, жылы / число, месяц, год) Е\\nБЕСБАЕВА ГАЛИЯ ДЖЕНИСОВНА = ”\\n(еңбекке уақытша жарамсыз адамның тегі, аты, әкесінің аты / фамилия, имя, отчество временно нетрудоспособного) Возраст (толық жасы / полных лет) Ше ee ы |\\nГКП ПХВ Жамбылский областной многопрофильный центр онкологии и хирургии, реш ike\\nмедицинская сестра\\n(қызмет орны - кәсіпорыннын не мекеменін атауы, лауазымы/место работы - наименование предприятия или учреждения, должность)\\nХаж-10 коды / Код МКБ-10 Қорытынды Хаж-10 коды / Заключительный Код МКБ-10\\n1.60.0 1.60.0\\n(қазақ не орыс тілінде / на казахском или русском языке)\\nEnGexxe уақытша жарамсыздықтың түрі көрсетілсін (жіті немесе созылмалы аурулардың асқынуы, жарақаттанғын жоне уланған, жүктілікті жасамды үзген, науқас балаға күтім жасау, жүкті болу жэне босану, жаңа Tyran баланы (балаларды) асырал ary, санзторийлщ-ку рорт тык\\nұйымдарда толық емделу, карантин, ортопедиялық протездеу) / Указать вид временной иструдоспособности (острое наи обострение хронические забоделация, травыы и отравления, искусственное прерывание беременности, уход за больным ребенком. беременность и ролы\\nусыновление/удочерение новорожденного ребенка (детей), лолечивание в саматорно-курортных организациях, карантин, ортоледическое протезирование).\\nКүтім жасау бойынша демалыс кезінде ХАЖ-10 бойынша науқастың жасы, диагнозы көрсетілсін, карантин бойынша демалыс кезінде ХАЖ-10 бойынша карантинді туындатқан аурудың атауы\\nПри отпуске по уходу указать возраст больного и диагноз по МКБ-10, при отпуске по карантину указать название заболевания по МКБ-10, вызвавшего карантин,\\nСанаторийлік-курор кезінде жолдама мерзімінің басталатын жәнс бітетін өрсетілсін / при санаторно-курортном лечении указать дату начала и окончания\\nРЕЖИМ\\nАмбулаторный Р\\nДәрігердің қолы / Подпись врача .........................................\\nСтационарда болды / Находился в стационаре МӘС-ға жіберілді / Направлен на МСЭ\\nж. г.\\nУақытша басқа жұмысқа ауыстырылсын / Перевести времсино на другую работу Куәландырылды / Освидетсльствован\\nж. ж. дейін ж. г.\\nСараптама қорытындысы / Экспертиое заключение\\nМӘС - тің мөрі/ Подпись начальника отдела МСЭ...............2244..Һ.ҺҺ.з..О04.4.04.Г074..\\nі Печать МСЭ\\nБас дәрігердің қолы / Подпись главного врача............................1... мне кеннкек нк екныанə\\nЖҰМЫСТАН БОСАТЫЛУ / ОСВОБОЖДЕНИЕ ОТ РАБОТЫ\\nҚай күннен бастап / С какого числа Қай күнді қоса алғанда қай күнге дейін / По какос Дәрігердің қызметі мен тегі / Должность и Дәрігердің колы / Подпись врача\\n(күні, айы / число, месяц) число включительно фамилия врача\\n(күні мен айы жазумен / число и месяц прописью)\\nЖҰМЫСКА КІРІСУ/ПРИСТУПИТЬ К РАБОТЕ\\nседьмое октября 2025 Емдеу мекемесінің мор! /\\n(күні мен айы жазумен / число и месяц прописью) ИСАКОВ МАРАТ НУРЛАНБАЕВИЧ Печать лечебного\\n(ләрігердің қызметі, тегі, колы / должность, фамилия и учреждения\\nподпись врача)\\nЖаңа парақ берілді (жалғасы)/Выдан новый лист (продолжение) №\"}]}\n","Temperature":0,"MaxTokens":500,"response_format":null}
{"choices":[{"finish_reason":"stop","index":0,"logprobs":null,"message":{"annotations":[],"content":"{\n  \"single_doc_type\": true,\n  \"confidence\": 95,\n  \"detected_doc_types\": [\"Лист временной нетрудоспособности (больничный лист)\"],\n  \"reasoning\": \"The document contains the title 'ЛИСТ О ВРЕМЕННОЙ НЕТРУДОСПОСОБНОСТИ', which matches the canonical type 'Лист временной нетрудоспособности (больничный лист)'.\",\n  \"doc_type_known\": true\n}","refusal":null,"role":"assistant"}}],"created":1763968449,"id":"chatcmpl-CfL3xvi8gxiFL6R0p0wtkbvY7zJYk","model":"gpt-4o-2024-08-06","object":"chat.completion","service_tier":"default","system_fingerprint":"fp_74ab616da4","usage":{"completion_tokens":108,"completion_tokens_details":{"accepted_prediction_tokens":0,"audio_tokens":0,"reasoning_tokens":0,"rejected_prediction_tokens":0},"prompt_tokens":2769,"prompt_tokens_details":{"audio_tokens":0,"cached_tokens":1024},"total_tokens":2877}}