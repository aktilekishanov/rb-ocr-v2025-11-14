{"Model":"gpt-4o","Content":"You are a deterministic OCR document-type classifier.\nAnalyze the OCR text and output ONLY the following JSON object (no extra text):\n{\n  \"single_doc_type\": true | false,\n  \"confidence: number [0...100]\",\n  \"detected_doc_types\": [ \"...\" ],\n  \"reasoning\": \"...\"\n  \"doc_type_known\": true | false\n}\nNo extra text or commentary outside the JSON.\n\nSemantics:\n- detected_doc_types: canonicalized titles (best-first). If none, output an empty array.\n- single_doc_type: if detected_doc_types contains =\u003c 1 type → true, otherwise → false.\n- doc_type_known: true ONLY if the top candidate is in the following Dictionary; false for unknown/ambiguous types.\n- confidence: coarse confidence for the top candidate (diagnostics only; do not derive doc_type_known from it).\n- reasoning: brief explanation for the decision.\n\n---\n\n## CLASSIFICATION ALGORITHM (strict order)\n\n### 1. Noise Filtering\n\nIgnore any of the following — they NEVER create new document types:\n* OCR artifacts, partial English words, mixed-language fragments\n* Dates, form numbers, signatures, translations, page numbers, headers/footers\n* Repetitions of the same title in another language (e.g. Kazakh ↔ Russian)\n\n### 2. Candidate Title Detection\n\nSearch the **first 15 non-empty lines** for possible document titles.\nA line is a title if it contains or resembles words like:\n**ПРИКАЗ, СПРАВКА, ЛИСТ, ВЫПИСКА, ЗАКЛЮЧЕНИЕ, УВЕДОМЛЕНИЕ**\nor their Kazakh equivalents (**БҰЙРЫҚ, АНЫҚТАМА, ХАТТАМА, ХАБАРЛАМА**).\n\n### 3. Canonical Document Types (reference list)\n\nFuzzy-match (Levenshtein ≥ 0.8) each candidate title to one of these canonical types from Dictionary:\n1. Лист временной нетрудоспособности (больничный лист)\n2. Приказ о выходе в декретный отпуск по уходу за ребенком\n3. Справка о выходе в декретный отпуск по уходу за ребенком\n4. Выписка из стационара (выписной эпикриз)\n5. Больничный лист на сопровождающего (если предусмотрено)\n6. Заключение врачебно-консультативной комиссии (ВКК)\n7. Справка об инвалидности\n8. Справка о степени утраты общей трудоспособности\n9. Приказ о расторжении трудового договора\n10. Справка о расторжении трудового договора\n11. Справка о регистрации в качестве безработного\n12. Приказ работодателя о предоставлении отпуска без сохранения заработной платы\n13. Справка о неполучении доходов\n14. Уведомление о регистрации в качестве лица, ищущего работу\n15. Лица, зарегистрированные в качестве безработных\n\nNOTE:\n**Important semantic aliases (normalize these as identical):**\n* \"о предоставлении отпуска по уходу за ребенком\"\n* \"о выходе в декретный отпуск по уходу за ребенком\"\n* \"о предоставлении декретного отпуска\"\n* \"Бала күтіміне байланысты жалақысы сақталмайтын демалыстар беру туралы\"\n\nAll refer to canonical type either:\n**Приказ о выходе в декретный отпуск по уходу за ребенком**\nOR\n**Справка о выходе в декретный отпуск по уходу за ребенком**\n\n### 4. Normalization\n\nMerge duplicates, translations, or paraphrases describing the same purpose.\nIf all detected titles are linguistic variants or synonyms of one canonical type → treat as **one** document → `single_doc_type = true`.\n\n### 5. Distinct Document Detection\nIf two or more **different canonical types** are present (e.g. \"Приказ о расторжении трудового договора\" and \"Справка о расторжении трудового договора\") → `single_doc_type = false`.\nBefore declaring \"multiple types,\" confirm that they represent **different legal purposes**, not wording variants or translations.\n\n### 6. Issuer Check\n\nIf the text shows clearly unrelated issuers (different organizations or ministries), and each is tied to a distinct canonical type → `single_doc_type = false`.\nOtherwise, ignore repeated issuer mentions.\n\n### 7. Default Safety\n\n- If uncertain, noisy, or ambiguous → default to\n{\n\"single_doc_type\": true,\n\"detected_doc_types\": [...]\n}\n- If confidence is \u003c 90 →\n{\n\"single_doc_type\": true,\n\"detected_doc_types\": [...]\n}\n\n---\n\n### 8. Output Rules\n\n* Return **exactly one** valid JSON object.\n* Do **NOT** include markdown formatting, code fences, explanations.\n* Do **NOT** include ```json formatting\n* JSON keys and string values must be enclosed in double quotes.\n\n---\n\n### TEXT FOR ANALYSIS\n{\"pages\": [{\"page_number\": 1, \"text\": \"Құжат электрондық үкімет порталымен құрылған a\\n€.gov назалы) 101000187820039\\nокумент сформирован порталом электрон 4 ы\\nДоку: формир P ектронного правительства Уникальный помер\\n\\\"Мемлекеттік қызметтер алу бойынша \\\"Информационно-справочная служба\\n(Бірыңғай байланыс орталығы) \u003c. 1 41 4 (Единый контакт-центр) Алу күпі мен уақыты\\nақпараттық-анықтамалық қызметі\\\" Касательно получения государственных услуг\\\" Дата получения 20. 1 1.2025\\nЛист о временной нетрудоспособности\\nПервичный\\nНаименование и адрес медицинской организации\\nКГП на ПХВ \\\"Городская больница №4 г. Усть-Каменогорска\\\" Управления здравоохранения Востачно-Казахстанской\\nВыдан 02.11.2025\\nВозраст 39\\nПол мужской\\nФамилия, имя и отчество временно нетрудоспособного (при его наличии)\\nБАЙБОСЫНОВ РАУАН АДАСКАНОВИЧ\\nМесто работы, наименование юридического лица ЦМС ППг Риддер ВКГОК ТОО\\\" Казцинк\\\"\\nДолжность водитель погрузчик\\nМКБ-10 Заключительный код МКБ-10\\nМ05.8 М05.8\\nere eee сак.\\nУказать вид временной нетрудоспособности (острое или обострение хронического заболевания, травмы и отравления,\\nискусственное прерывание беременности, уход за больным ребенком, беременность и роды, усыно вление/удочерение\\nноворожденного ребенка (детей), долечивание в санаторно-курортных организациях, карантин, ортопедическое\\nпротезирование)\\nЗаболевание\\nПо уходу за больным ребенком указать возраст больного и диагноз по МКБ-10, при карантине указать название заболевания\\nпо МКБ-10, вызвавшего карантин\\n-----------\\nПри санаторно-курортном лечении указать дату начала и окончания срока путевки\\nс ПО\\nРежим Стационарный\\nОтметки о нарушении режима Нет\\nФИО врача отвечающий за режим\\nОсы құжат «Электрондық құжат және электрондык цифрлық қолтаңба туралы» Қазақстан Республикасының 2003 жылғы 7 қаңтардағы N 370-\\nП Заңы 7 бабының 1 тармағына сәйкес қағаз тасығыштағы құжатпен бірдей.\\nДанный документ согласно пункту 1 статьи 7 ЗРК от 7 января 2003 года №370-П «Об электронном документе и электронной цифровой\\nподписи» равнозначен документу на бумажном носителе.\\nЭлектрондык құжаттың түпнұсқалығын Сіз egov.kz сайтында, сондай-ақ «электрондық үкімет» веб-порталының мобильді қосымшасы арқылы\\nтексере аласыз.\\nПроверить подлинность электронного документа Вы можете на egov.kz, а также посредством мобильного приложения веб-портала\\n«электронного правительства».\\nс,\\nx eS. Se eters Oe LS\\nKy\\n\u003c\\n“штрих-код ДСМ ақпараттық жүйесінен алынған жэне Қазақстан Республикасы Денсаулық сақтау министрлігінің электрондық цифрлық қолтаңбасымен қол\\nқойылған деректерді қамтиды\\n“штрих-код содержит данные, полученные из информационной системы МЗ и подписанные электронно-цифровой подписью Министерства здравоохранения\\nРеспублики Казахстан\"}, {\"page_number\": 2, \"text\": \"Құжат электрондық үкімет порталымен құрылған Бірегей нәмі\\nегдоу көленке 101000187820039\\nДокумент сформирован порталом электронного правительства Уникальный номер\\n\\\"Мемлекетик кызметтер алу бойынша \\\"Информапионно-справочная служба\\n(Бірыңғай байланыс орталығы) %, 1 41 4 (Единый контакт-центр) Алу күні мен уақыты\\nақпараттық-анықтамалық қызметі\\\" Касательно получения государственных услуг\\\" Дата получения 20. 1 1 .2025\\nНаходился в стационаре Направлен на МСЭ\\nс 24.10.2025 по 01.11.2025 ФИО врача\\nПеревести временно на другую работу Освидетельствован\\nс по Экспертное заключение\\nФИО главного врача ФИО начальника отдела МСЭ\\nОсвобождение от работы\\nДата Должность врача ФИваа о\\nС какого числа | 24.10.2025] 45500000003322378 Адильханова Гульжан Ора\\nПо какое число | 02.11.2025] 45500000003322378 Адильханова Гульжан Opa\\nПриступить к работе\\nВыдан новый лист\\nДолжность врача ФИО врача\\n45500000003322378 Адильханова Гульжан Оразгалиевна\\nМесто работы\\nОтдел\\nДолжность\\nТаб Хо\\nВид работы\\nНе работал с по\\nВыходные дни за период нетрудоспособности\\nПриступил к работе\\nФИО начальника отдела\\nФИО табельщика\\nДата\\nОсы құжат «Электрондык кұжат және электрондық цифрлық қолтаңба туралы» Қазақстан Республикасының 2009 жылғы 7 қаңтардағы М 370-\\nП Заңы 7 бабының 1 тармағына сәйкес қағаз тасығыштағы құжатпен бірдей.\\nДанный документ согласно пункту 1 статьи 7 ЗРК от 7 января 2003 года N370-II «Об электронном документе и эпектронной цифровой\\nподписи» равнозначен документу на бумажном носителе.\\nЭлектрондық құжаттың түпнұсқалығын Сіз egov.kz сайтында, сондай-ақ «электрондық үкімет» веб-порталының мобильді қосымшасы арқылы\\nтексере аласыз.\\nПроверить подлинность электронного документа Вы можете на egov.kz, а также посредством мобильного приложения веб-портала\\n«электронного правительства».\\n“штрих-код ДСМ ақпараттық жүйесінен алынған және Қазақстан Республикасы Денсаулық сақтау министрлігінің электрондық цифрлық қолтаңбасымен қол\\nқойылған деректерді қамтиды\\n*штрих-код содержит данные, полученные из информационной системы МЗ и подписанные электронно-цифровой подписью Министерства здравоохранения\\nРеспублики Казахстан\"}]}\n","Temperature":0,"MaxTokens":500,"response_format":null}
{"choices":[{"finish_reason":"stop","index":0,"logprobs":null,"message":{"annotations":[],"content":"{\n  \"single_doc_type\": true,\n  \"confidence\": 95,\n  \"detected_doc_types\": [\"Лист временной нетрудоспособности (больничный лист)\"],\n  \"reasoning\": \"The document contains the title 'Лист о временной нетрудоспособности', which matches the canonical type 'Лист временной нетрудоспособности (больничный лист)'. No other document types are detected.\",\n  \"doc_type_known\": true\n}","refusal":null,"role":"assistant"}}],"created":1764054819,"id":"chatcmpl-CfhX1gc1ndUJpxt4vu9WUGaPUYgDT","model":"gpt-4o-2024-08-06","object":"chat.completion","service_tier":"default","system_fingerprint":"fp_e819e3438b","usage":{"completion_tokens":100,"completion_tokens_details":{"accepted_prediction_tokens":0,"audio_tokens":0,"reasoning_tokens":0,"rejected_prediction_tokens":0},"prompt_tokens":2618,"prompt_tokens_details":{"audio_tokens":0,"cached_tokens":1024},"total_tokens":2718}}